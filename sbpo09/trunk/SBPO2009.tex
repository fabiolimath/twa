
%%%%%%%%%%%%%%%%%% Generated by Fabio Lima - fabiolimath at gmail%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[11pt, a4paper]{article}

\input{prova.tex}
\usepackage{sbpo-template}
% \usepackage{abnt-alf}

% acentuação.
% regra de hifenização das palavras não acentuadas: não requer \usepackage[T1]{fontenc}
\hyphenation{aggregate Mixed boxplots sub-pro-ble-mas tem-po-ra-ria-men-te con-ges-tio-na-men-to i-gual-men-te ra-pi-da-men-te pro-ble-ma di-fe-ren-tes con-fia-bi-li-da-de ca-mi-nhos Caixeiro}

% regra de hifenização das palavras acentuadas: requer \usepackage[T1]{fontenc}
\hyphenation{mo-di-fi-ca-ção trá-fe-go mi-ni-mi-za-ção óp-ti-co i-te-ra-ções ca-rac-te-rís-ti-ca va-riá-veis res-tri-ções a-ca-dê-mi-ca}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\title{UM MODELO EFICIENTE PARA O PROJETO COMPLETO DE REDES ÓPTICAS}

\author{Fabio de Oliveira Lima\inst{1}, Marcelo de Oliveira Lima\inst{1}\\ 
Marcelo Eduardo Vieira Segatto\inst{1} }

\address{ Laboratório de Telecomunicações\\
Programa de Pós-Graduação em Engenharia Elétrica\\
Universidade Federal do Espírito Santo (UFES) -- Caixa Postal 5011\\
CEP 29060-970 -- Vitória -- ES -- Brasil
  \email{\{fabiolimath,marcelo.olima\}@gmail.com, segatto@ele.ufes.br}
}

\begin{document}
\maketitle


\begin{abstract}
  This paper presents a new formulation as a problem of mixed-integer
linear programming for the design of communication optical networks.
This is a comprehensive modeling, which includes the network topology
design, traffic demands routing, besides the routing of optical paths
and allocation of wavelengths to them. The formulation supports
multiple links between pairs of  network's nodes, either in physical
or virtual topology. In its basic version, the model uses the
minimization of the number of physical hops as objective function.
However, other possible metrics and constraints that complement the
formulation are presented, ensuring flexibility for the model,
according to the application of interest. Are presented experimental
results to validate the efficiency of this formulation with regard to
quality and performance computing.\\
\textbf{Keywords}: Mixed-integer linear programming. Optical networks design. Networks.
\end{abstract}
     
\begin{resumo} 
  Este artigo apresenta uma nova formulação, na forma de um problema de
programação linear-inteira mista, para o projeto de redes ópticas de
comunicação. Trata-se de uma modelagem ampla, que engloba o projeto da
topologia da rede, o roteamento das demandas de tráfego, além do
roteamento dos caminhos ópticos e alocação de comprimentos de onda aos
mesmos. A formulação suporta múltiplas ligações entre os pares de nós
da rede, seja na topologia física ou virtual. Em sua versão básica, o
modelo utiliza a minimização do número de saltos físicos como função
objetivo. No entanto, são apresentadas outras possíveis métricas e
restrições que complementam a formulação, garantindo uma flexibilidade
para o modelo, de acordo com a aplicação de interesse. São
apresentados resultados de experimentos para validação da eficiência
desta formulação com relação à qualidade e desempenho computacional.\\
\textbf{Palavras Chave}: Programação linear-inteira mista. Projeto de redes ópticas. Redes.
\end{resumo}
\newpage

\section{Introdução}
\label{intro}


O interesse pela comunicação através de redes ópticas se intensificou
 após a introdução da tecnologia de multiplexação por comprimento de
 onda (WDM - {\it Wavelength Division Multiplexing}), pois ela
 possibilita a transmissão de vários sinais pelo mesmo meio, sendo cada
 um modulado em um comprimento de onda específico. Alguns fatores de
 interesse nesse tipo de rede são: infra-estrutura flexível e elevadas
 capacidade de transmissão de dados e confiabilidade da rede.

 Redes Ópticas WDM com roteamento por comprimento de onda consistem de
 nós roteadores conectados por enlaces de fibra óptica. A topologia
 física da rede consiste na interconexão dos nós roteadores através de
 cabos de fibra óptica, ela pode ser representada por um grafo (Figura \ref{fig:Tops}, item $a)$) 
 onde as arestas equivalem às fibras. A topologia lógica, ou
 virtual, representa as conexões entre os pares de nós em uma camada
 superior à física, ela é constituída de caminhos lógicos que são
 configurados a partir da topologia física, sendo formados por um ou mais
 enlaces de fibra em sequência (Figura \ref{fig:Tops}, item $b)$).

 As informações trafegam ao longo de um caminho lógico no domínio
 óptico. Caso seja necessário que uma informação trafegue de um caminho
 lógico para outro, é necessária sua passagem pelo domínio eletrônico
 no nó intermediário. O tráfego dentro de um caminho lógico é dito transparente.
A cada caminho lógico é associado um comprimento
 de onda.

 Técnicas de otimização são largamente empregadas nas pesquisas
 relativas ao projeto de redes ópticas, as soluções propostas fazem uso
 de métodos exatos e heurísticas, separadamente ou em conjunto. O
 projeto de redes ópticas possui elevada dificuldade de resolução e na
 literatura ele é normalmente subdividido em dois conhecidos problemas:
 Projeto da Topologia Virtual e Distribuição de Tráfego (VTD -
 \textit{Virtual Topology Design}) e Roteamento de Tráfego e Alocação
 de Comprimentos de Onda (RWA - \textit{Routing and Wavelength
 Assignment}). O RWA pode ser divido em dois subproblemas: o roteamento
 do tráfego (RS - \textit{Routing Subproblem}) e a alocação de
 comprimentos de onda (WAS - \textit{Wavelength Assignment Subproblem})
 \cite{Zang00}. Cada um destes três problemas (VTD, RS e WAS) possuem
 formulações MILP (\textit{Mixed Integer Linear Problem}) \cite{ram02,
 Zang00}.

 Neste trabalho propomos uma modelagem para o projeto de redes ópticas, que denominaremos de TWA (\textit{Trafic on Wavelength Assignment}),
 capaz de tratar desde a escolha da topologia física da rede até a definição
 da topologia virtual, incluindo a distribuição de tráfego, a definição
 das rotas físicas e a alocação de comprimentos de onda. Trata-se de
 uma formulação MILP mais abrangente do que as encontradas na literatura 
\cite{Karcius04, Zang00, Jaumard04, ram02} e que permite controlar conjuntamente
 métricas dos problemas VTD e RWA. 

Destaca-se ainda que
 este modelo é consideravelmente mais tratável no que se refere ao
 número de variáveis e restrições, sendo inferior ao dos modelos mais
 enxutos que resolvem apenas o RWA \cite{Jaumard04,Tornatore07}. E sob
 certas circunstâncias, chega a ser similar ao da modelagem clássica
 que trata apenas do VTD \cite{ram02}.

 Esta é uma nova modelagem, mas que guarda semelhanças com alguns
 modelos conhecidos \cite{ram02, Tornatore07}. Nas modelagens para o WAS \cite{Zang00}, é
 alocado um comprimento de onda sobre um caminho determinado pelo RS.
 Caminho este, que é escolhido para atender uma determinada ligação
 lógica, proveniente da solução do VTD, sobre a rede física. Esta
 abordagem exige variáveis diferentes para as ligações lógicas, para as
 rotas das mesmas e para a alocação de comprimentos de onda
 \cite{Karcius04}. No modelo que será apresentado neste trabalho,
 propomos uma visão diferente. É dada total liberdade para as variáveis
 de alocação de comprimentos de onda, sem ter que obedecer às ligações
 físicas, lógicas ou rotas pré estabelecidas. Pois, tendo sido alocado
 um comprimento de onda entre um par ordenado de nós através de algum
 caminho na rede, estará determinado implicitamente uma rota física
 pela rede e uma ligação lógica entre esses nós. Escrevendo todas as
 restrições do RWA e do VTD apenas em termos dessas variáveis de
 alocação de comprimentos de onda, não serão necessárias variáveis
 adicionais para determinar as rotas e as ligações lógicas.

 Deste modo, quase todo o problema já está mapeado: roteamento dos
 caminhos ópticos e definição das topologias física e lógica, além é
 claro da alocação de comprimentos de onda. Resta apenas resolver a
 distribuição do tráfego. Isto é tradicionalmente feito sobre as
 variáveis de ligação lógica, dentro do VTD \cite{ram02}, o que retorna
 a matriz de requisições, que é a entrada para o RWA \cite{Zang00}. Mas
 aqui faremos diferente, as restrições para a distribuição do tráfego
 também serão escritas em função das variáveis de alocação de
 comprimentos de onda. Na prática, isso eliminará as restrições de
 distribuição de requisições de tráfego do RWA \cite{Zang00}.

 As variáveis e restrições citadas acima fornecem um modelo completo
 para o projeto de redes ópticas. Nesse modelo algumas vantagens  foram
 incorporadas, a principal delas é que a distribuição do tráfego e seu
 roteamento são feitos com variáveis agregadas, de forma similar a
 modelos menos abrangentes encontrados na literatura \cite{Tornatore07,
 ram02}. Outra característica é que o modelo
 aqui apresentado naturalmente suporta multi caminhos e multi fibras
 entre um mesmo par de nós da rede.

%, e somente se for interesse limitar essas possibilidades serão necessárias restrições adicionais para tal.

O restante deste texto está organizado da seguinte forma: Na Seção \ref{Basic} a seguir apresentamos a modelagem básica para TWA, onde são colocadas as restrições fundamentais da formulação proposta. Na Seção \ref{cases} mostraremos como adaptar o modelo básico para outros casos de uso, permitindo o controle ou a minimização direta de várias métricas. Na Seção \ref{testes} são apresentados resultados computacionais obtidos através desta modelagem e comparações dos mesmos com outros resultados encontrados na literatura.

\section{Modelagem TWA}
\label{Basic}

A seguir será apresentada a forma básica do modelo TWA. A função objetivo aqui considerada é o número de saltos físicos na rede \cite{Karcius04}, e implicitamente também é controlado o número de comprimentos de onda \cite{Zang00}. Será considerada a restrição de conservação dos comprimentos de onda ao longo do caminho óptico \cite{Zang00}, ou seja, não trabalharemos com a hipótese de conversão de comprimentos de onda. A seguir, no conjunto de Dados \ref{Cons}, listamos as constantes que definem uma instância para o modelo.

\zz
\begin{proposition}
\label{Cons}
Uma instância para o modelo TWA é definida por:

\begin{enumerate}
\item $N$ $=$ Número de nós da rede.
\item $W$ $=$ Número máximo de comprimentos de onda admitido por fibra.
\item $H$ $=$ Grau físico máximo de entrada e saída de cada nó.
\item $M$ $=$ Multiplicidade física máxima admitida entre os pares de nós.
\item $Cap$ $=$ Capacidade de tráfego de cada canal lógico.
\item $C_{i,j}$ $=$ Custo associado a uma ligação física orientada entre o par de nós $(i,j)$.
\item $T$ $=$ Custo por unidade de fluxo.
\item $P_{i,j}$ $=$ Demanda de tráfego, com origem $i$ e destino $j$.
\end{enumerate}
\end{proposition}

%Para simplificar a notação das restrições do modelo, adota-se a constante $A_m = \sum_n P_{m,n}$ \cite{ram02}, que é a soma das demandas de tráfego agregadas pela origem $m$.


% \subsection{Topologia Generalizada}
% \label{Top}

A variável central do modelo, a partir da qual todas as demais serão definidas, chamada de \textit{componente da Topologia Generalizada} (ou simplesmente \textit{componente topológica}), é representada graficamente na Figura \ref{fig:B} e formalmente definida na Variável \ref{comp}. Ela sozinha representa as topologias lógica e física, o trajeto físico das ligações lógicas e o comprimento de onda utilizado. O par ordenado $(s,d)$ representa uma ligação lógica origem em $s$ e fim em $d$.

\zz
\begin{notation}
Os índices $i,j,s,d\in \{1,..,N\}$ representam os nós da rede, onde os pares ordenados $(i,j)$ e $(s,d)$ indicam respectivamente ligações físicas e ligações lógicas, com $i\neq j$ e $s\neq d$. O índice $w \in \{1,..,W\}$ representa os comprimentos de onda disponíveis.
\end{notation}

\zz
\begin{theorem}
\label{comp}
 Seja $B_{s,i,j,w} \in \{0,..,M\}$ uma componente topológica, com $s\neq j$, $\forall (s,i,j)$.
\end{theorem}

\begin{figure}[hb]
 \centering
\includegraphics[bb=36 739 246 805, scale=0.7]{figs/B.eps}
% B.eps: 1179666x1179666 pixel, 300dpi, 9987.84x9987.84 cm, bb=36 739 246 805
 \caption{Representação gráfica de uma componente topológica.}
 \label{fig:B}
\end{figure}

% \begin{equation}
% s\neq j\quad \text{ e }\quad i\neq j\quad \forall (s,i,j).
% \label{Nules}
% \end{equation}

%A princípio, o número de variáveis do tipo descrito aqui seria $N^3\cdot W$, mas devemos excluir algumas que são trivialmente nulas: $s\neq j$ pois $s$ é origem da ligação lógica e $j$ é destino da ligação física; e $i\neq j$ pois não são aceitos \textit{autoloops} \cite{cormen02}.

\begin{figure}[hb]
 \centering
\includegraphics[bb=39 455 511 811, scale=0.6]{figs/topologias.eps}
 % topologias.eps: 1179666x1179666 pixel, 300dpi, 9987.84x9987.84 cm, bb=30 375 511 801
 \caption{Exemplo da interpretação das componentes topológicas.}
 \label{fig:Tops}
\end{figure}
%\clearpage

Numa componente da topologia generalizada $B_{s,i,j,w} = m$, o índice $s$ representa o nó de origem das $m$ ligações lógicas que, passando por uma das ligações físicas iniciadas em $i$ e incidentes em $j$, usa o comprimento de onda $w$. Em outras palavras, \textit{uma componente topológica $B_{s,i,j,w} = m$ é iniciada em $i$, incidente em $j$, com origem $s$, comprimento de onda $w$ e valor $m$}. Esse vocabulário será usado no restante do texto.

 Na Figura \ref{fig:Tops}, temos um exemplo de interpretação das componentes topológicas, todas com origem no nó $s$ e com o mesmo comprimento de onda $w_1$. No item $d)$ desta figura, o valor $2$ da componente que liga os nós $(s,i)$ é interpretado como duas ligações físicas entre esses nós, representadas no item $a)$. No item $b)$, vemos uma ligação lógica dupla entre os nós $(s,j)$, onde uma delas passa de forma transparente pelo nó $i$, como indicado no item $c)$. Note ainda que, no item $d)$, dois caminhos lógicos incidentes em $i$ mas apenas um iniciado. Isso indica que uma ligação lógica termina em $i$, enquanto a outra segue adiante.

A definição das componentes topológicas não deixa claro aonde terminam as ligações lógicas. Sua finalização será garantida implicitamente pelas restrições do modelo. Se $B_{s,i,j,w}=0$, na ligação física $(i,j)$ (que pode então não existir), não existem ligações lógicas iniciadas em $s$, passando por $(i,j)$, usando o comprimento de onda $w$. 

Por outro lado, se $B_{s,i,j,w}=m$, para algum $m \in \{0,..,M\}$, existem $m$ ligações lógicas originadas em $s$ no comprimento de onda $w$, passando por $m$ ligações físicas distintas entre o par de nós $(i,j)$ (que agora obrigatoriamente existem). Note que $M$ limita apenas a multiplicidade dos enlaces físicos. Mesmo que $M=1$ ( $B_{s,i,j,w}$ será uma variável binária), as  ligações lógicas entre um par $(s,d)$ poderão usar múltiplos trajetos físicos, ou inda, mais de um comprimento de onda em uma mesma fibra.

% A multiplicidade das ligações lógicas pode ser controlada por uma restrição própria, que será mostrada na Seção \ref{ControlMl}.

%  Na versão mais enxuta, com a topologia física fixada (veja a Seção \ref{Fis}, adiante) do modelo é adicionada apenas a variável de distribuição de fluxo agregado. Dependendo do caso de uso, outras variáveis podem ser necessárias (como será visto na Seção \ref{cases}), mas nenhuma supera o número de componentes da topologia generalizada, que define portanto a ordem de grandeza do número de variáveis desta modelagem.

% \subsection{Conservação do Percurso Lógico}
% \label{ConservLogS}

\zz
\begin{theorem}
\label{FisVar}
 Seja $D_{i,j} \in \{0,..,M\}$ o número de ligações físicas entre o par de nós $(i,j)$. 
\end{theorem}

\zz
\begin{theorem}
 \label{FlowVar}
 Seja $q_{i,s,d} \in [0,1]$ a fração de fluxo agregado do nó $i$, passando pela ligação lógica $(s,d)$, com $i\neq d$. 
\end{theorem}

\begin{equation}
 \sum_j (B_{s,j,i,w} - B_{s,i,j,w}) \geq 0 ,\quad \forall (s,i,w) \text{, com } s\neq i.
% \sum_j B_{s,j,i,w} \geq \sum_j B_{s,i,j,w},\quad \forall (s,i,w) \text{, com } s\neq i.
\label{ConservLog}
\end{equation} 

\begin{equation}
\sum_s B_{s,i,j,w} \leq D_{i,j},\quad \forall (i,j,w).
\label{DefFis}
\end{equation} 

\begin{equation}
\sum_j D_{i,j} \leq H,\quad \forall i \qquad \text{e} \qquad \sum_i D_{i,j} \leq H,\quad \forall j.
\label{ConservGFis}
\end{equation} 

\begin{equation}
\sum_{i,j} (q_{i,s,d}\cdot P_{i,j}) \leq Cap\cdot \sum_{j,w} (B_{s,j,d,w} - B_{s,d,j,w}),\quad \forall (s,d).
%\sum_m (q_{s,d,m}\cdot \sum_n P_{m,n}) \leq Cap\cdot (\sum_{j,w} B_{s,j,d,w} - \sum_{j,w} B_{s,d,j,w}),\quad \forall (s,d).
\label{DefCapFlow}
\end{equation} 

\begin{equation}
\sum_d q_{s,d,s} = 1,\, \forall s \quad \text{e} \quad \sum_s q_{i,s,j} - \sum_d q_{i,j,d} = \frac{P_{i,j}}{\sum_j P_{i,j}},\, \forall (i,j).
\label{ConservFlow}
\end{equation} 

\begin{equation}
 \label{ObjB}
 \text{Minimize: } \sum_{s,i,j,w} B_{s,i,j,w}.
\end{equation}

A Restrição (\ref{ConservLog}) garante a continuidade dos percursos e a conservação dos comprimentos de onda. Se o número de componentes de ligações lógicas incidentes em $i$ for maior que o número de iniciadas, não originadas nele, essa diferença é o número de ligações lógicas que terminam em $i$. É deste modo que a finalização das ligações lógicas pode ser mapeada. Isso assegura a rastreabilidade de uma componente da topologia generalizada até a origem da ligação lógica.

%Esta restrição garante que se há ligações lógicas saindo de um nó $i$, iniciadas em $s$ no comprimento de onda $w$, mas não originadas nele ($s\neq i$), então deverá haver (pelo menos) em igual número ligações lógicas incidentes em $i$, com a mesma origem e no mesmo comprimento de onda. Isso assegura a rastreabilidade de uma componente da topologia generalizada até a origem da ligação lógica. 

% \begin{figure}[htb]
%  \centering
%  \includegraphics[bb=70 210 533 771, scale=0.5]{figs/unsolved.eps}
%  % unsolved.eps: 1179666x1179666 pixel, 300dpi, 9987.84x9987.84 cm, bb=70 210 533 771
%  \caption{Duas possibilidades de interpretação das componentes topológicas.}
%  \label{fig:Unsolved}
% \end{figure}
% 
% Isto é suficiente para a modelagem, embora na implementação real de múltiplas rotas físicas entre um mesmo par de nós $(i,j)$, alguns detalhes ainda carecem ser decididos, pois podem haver mais de uma maneira de configura-los. Um exemplo disso é dado na Figura \ref{fig:Unsolved}, onde o conjunto de componentes topológicas dado permite duas possibilidades de configuração dos percursos lógicos. Essas situações podem ser tratadas considerando outros fatores, como a distância entre os nós. Mas são questões de menor complexidade, se a topologia generalizada já estiver decidida, e podem ser resolvidas na fase de configuração da rede. Como isso não influencia na modelagem, não será tratado aqui.
% 
% Não é evitado explicitamente a ocorrência de ciclos no percurso dos caminhos ópticos, mas isso é indiretamente controlado pela função objetivo, seja ela de minimização de custos, de congestionamento (Seção \ref{Cong}) ou número de comprimentos de onda utilizados (Seção \ref{CtrlW}). E mesmo que apareçam ciclos, eles não invalidam o resultado.
% 
% \subsection{Topologia Física}
% \label{Fis}

Apesar da topologia física ser determinada pelas componentes da topologia generalizada, para fins de controle do grau físico, é necessário uma variável adicional, que é definida na Variável \ref{FisVar}. Se $D_{i,j}=0$, não há ligações físicas entre o par $(i,j)$, mas se $D_{i,j}=m$, para algum $m \in \{0,..,M\}$, existem $m$ ligações físicas entre o par $(i,j)$. Se a topologia física for fixada, isto é, informada como um dado de entrada, as componentes da topologia generalizada $B_{s,i,j,w}$, com $D_{i,j}=0$, devem ser retiradas da modelagem. Isto deve ser considerado em todo o modelo e daqui por diante toma-se como subentendido. 

Quando $D_{i,j}$ é fixa, a Restrição (\ref{DefFis}) limita a multiplicidade física das componentes, por outro lado, quando a $D_{i,j}$  é variável, ela apenas registra em $D_{i,j}$ a multiplicidade física alcançada pelas componentes da topologia generalizada. Se a topologia física é livre, a Restrição (\ref{ConservGFis}) é necessária para o controle do grau físico de saída e entrada em cada nó, caso contrário esta restrição pode ser desconsiderada.

% 
% \begin{equation}
% \sum_i D_{i,j} \leq H,\quad \forall j.
% \label{ConservGFisIn}
% \end{equation} 

%Quando a topologia física é livre, não é controlada a existência de $D_{i,j}\neq 0$, com $B_{s,i,j,w}=0$, $\forall (s,w)$. Dependendo do caso de uso, isso ou não influencia no resultado, ou pode ser controlado indiretamente pela função objetivo, por exemplo, por meio do custo de instalação. Opcionalmente poderia-se usar para este fim uma restrição da forma $\sum_{s,w} B_{s,i,j,w} \geq D_{i,j}$, para todo $(i,j)$, mas essa hipótese é por hora desconsiderada.

% \subsection{Controle de Fluxo}
% \label{Flow}

Para a distribuição do tráfego são usadas as variáveis de fração de fluxo agregado definidas na Variável \ref{FlowVar} e determinadas pela Restrição (\ref{DefCapFlow}). Como podem haver múltiplos canais lógicos entre um par $(s,d)$, o tráfego entre um par de nós é limitado pela capacidade de um canal lógico multiplicada pelo número de ligações lógicas em questão. Esse número é obtido da quantidade de componentes topológicas originadas em $s$ e incidentes em $d$, diminuído do número de componentes topológicas iniciadas em $d$ e originadas em $s$. 

A conservação de fluxo é assegurada pela Restrição (\ref{ConservFlow}), que também garante o envio e a entrega das demandas de tráfego. As aquações da Restrição (\ref{ConservFlow}) são semelhantes, em sua forma, às encontradas na modelagem agregada para o VTD \cite{ram02}. todavia, sua interpretação é sutilmente diferente, pois aqui uma fração de fluxo pode representar vários canais ópticos entre o par $(s,d)$.

% \subsection{Saltos Físicos}

Uma métrica importante para o projeto de redes ópticas é o número de saltos físicos da topologia\cite{Karcius04}. Este valor é minimizado na Função Objetivo (\ref{ObjB}), através da soma de todas as componentes topológicas, pois cada componente topológica representa um salto físico. Uma propriedade importante desta abordagem, é que ela controla o aparecimento de ciclos na topologia generalizada. Opcionalmente essa soma poderia ser apenas limitada por um valor, através de uma restrição, se outra função for mais apropriada.

Quando a topologia física é um parâmetro, o número de pares $(i,j)$ válidos é da ordem de $N\cdot H$. Assim o número de componentes da topologia generalizada será da ordem de $N²\cdot H\cdot W$, semelhante aos modelos mais enxutos para RWA \cite{Jaumard04}. Considerando $H$ e $W$ constantes, a ordem de grandeza do número de variáveis deste modelo será $N²$, similar a de modelos que resolvem apenas o VTD \cite{ram02}.


\section{Extensões à Modelagem Básica}
\label{cases}

Nesta Seção são apresentados outros casos de uso da modelagem TWA. Apresentamos como podem ser incluídos outros parâmetros de controle bem conhecidos e que não foram incluídos na formulção básica da seção anterior. Além disso, são consideradas outras opções para a função objetivo. 

%Veremos, por exemplo, como incluir as restrições de controle do grau lógico dos nós e como usar o congestionamento (tráfego do nó mais carregado da rede) como função objetivo, duas considerações comuns das modelagens de VTD. Veremos também formas de controlar ou otimizar o número de comprimentos de onda, entre outras métricas normalmente vistas em modelos de RWA.

Algumas vezes ao longo desta seção será necessário considerar a capacidade física do nó $i$ de realizar ligações lógicas (Dados \ref{CapLogi}), que é a capacidade do \textit{Optical switch} de receber ou originar ligações \cite{Zang00}. 

\zz
\begin{proposition}
Se a topologia física é uma variável do modelo ($D_{i,j}$), o grau físico de entrada e saída $H$ é considerado uniforme para a rede e $CapLog_i = H\cdot W$. Caso seja de interesse fixar a topologia física, passando a mesma como parâmetro do modelo, $CapLog_i = \sum_j D_{i,j}\cdot W$.\label{CapLogi}
\end{proposition}

\subsection{Grau Lógico e Multiplicidade de Ligações Lógicas}
\label{ConservGl}

No modelo TWA o número de ligações lógicas é implicitamente limitado por $CapLog_i$. Todavia, o número de receptores ou transmissores em um nó, pode ser menor que essa capacidade \cite{Zang00,ram02}. Assumimos que todos os nós tem o mesmo número de receptores e transmissores, que é chamado de grau lógico ($Gl$), que também passa a ser um dado de entrada. Para controlar o grau lógico, são necessárias duas restrições que devem ser adicionadas ao modelo básico: a Restrição (\ref{ConservLogOut}) que controla o grau lógico de saída; e a Restrição (\ref{ConservLogIn}) que controla o grau lógico de entrada. 

A Restrição (\ref{ConservMl}) acrescenta a limitação da multiplicidade das ligações lógicas ($Ml$) ao modelo TWA. Ela já é indiretamente limitada por $CapLog_i$ ou pelo grau lógico. Para não usar multiplicidade nas ligações lógicas, basta fazer $Ml=1$.


\zz
\begin{proposition}
 Grau Lógico $=$ $Gl\leq CapLog_i, \quad \forall i$.
\label{Gl}
\end{proposition}

\zz
\begin{proposition}
 $Ml$ $=$ Multiplicidade das Ligações Lógicas.
\label{Ml}
\end{proposition}

\begin{equation}
\sum_{w,j} B_{s,s,j,w} \leq Gl,\quad \forall s.
\label{ConservLogOut}
\end{equation} 

\begin{equation}
 \sum_{s,j,w} B_{s,j,i,w} - \sum_{s,j,w} B_{s,i,j,w} \leq Gl,\quad \forall i \text{, com } s\neq i.
\label{ConservLogIn}
\end{equation}

\begin{equation}
 \sum_{j,w} B_{s,j,i,w} - \sum_{j,w} B_{s,i,j,w} \leq Ml,\quad \forall (s,i) \text{, com } s\neq i.
\label{ConservMl}
\end{equation}


\subsection{Custos de Instalação e Operação}
\label{ObjC}

Uma métrica importante no projeto da redes ópticas é a minimização dos custos de instalação e operação \cite{mukherjee}. O custo de instalação $C_{i,j}$ é o custo associado a uma ligação física orientada entre o par de nós $(i,j)$. O custo de operação $T$ é definido como o custo por unidade de fluxo. Este último pode ser dividido em duas partes, uma constante ($Tc = \sum_{i,j} T\cdot P_{i,j}$), formada pelas demandas de tráfego (que necessariamente deverão ser roteadas), e outra variável ($Tv = \sum_{i,j,s,d} T\cdot q_{i,s,d}\cdot P_{i,j} $), composta pelo tráfego adicional que é gerado, ou seja, o tráfego retransmitido.

Por essa razão, minimizar o custo por unidade de fluxo é equivalente a minimizar o tráfego retransmitido na rede, o que por sua vez, equivale a minimizar o processamento eletrônico de tráfego dos nós da rede \cite{Renato06}. Soma-se a isso o fato de que é necessária nesta modelagem a Restrição (\ref{DefCapFlow}), de limitação da capacidade $Cap$ dos canais lógicos. Deste modo, limitando o congestionamento na rede e minimizando o processamento, temos uma abordagem mais eficiente, quanto ao custo computacional, para o projeto da topologia virtual em comparação com a minimização do congestionamento da rede \cite{Renato06, ram02}. 

Se não for necessário ponderar o custo por unidade de fluxo, basta fazer $T=1$, e se não for necessário considerar o custo total de instalação ($CI = \sum_{i,j} C_{i,j}\cdot D_{i,j}$), basta fazer $C_{i,j}=0$ para todo $(i,j)$. Deste modo seria simplesmente um modelo de minimização do processamento, com limitação do congestionamento \cite{Renato06}. A função objetivo, que é a minimização do custo total $R = CI + Tc + Tv$, é dada explicitamente pela restrição a seguir.

\begin{equation}
 \text{Minimize: } R =  CI + Tc + Tv = \sum_{i,j} C_{i,j}\cdot D_{i,j} + \sum_{i,j} T\cdot P_{i,j} + \sum_{i,j,s,d} T\cdot q_{i,s,d}\cdot P_{i,j}.
\label{MinC}
\end{equation} 


\subsection{Congestionamento}
\label{Cong}

Como foi comentado na Seção \ref{Basic}, a multiplicidade das ligações lógicas fica implícita para as variáveis de distribuição de tráfego. Deste modo, não é possível minimizar diretamente o tráfego em cada canal. Portanto, para minimizar o congestionamento, são necessárias novas variáveis para contabilizar o tráfego em cada canal.

A fração de tráfego $f_{s,r,d}$ (Variável \ref{f}) é semelhante a Variável \ref{FlowVar} (fração de fluxo), com a diferença de que a Variável \ref{f} separa o fluxo por canal, e a anterior considerava todos os canais. Por sua vez, a ligação lógica $F_{s,r,d}$ (Variável \ref{F}) mapeia cada canal óptico em uma ligação lógica independente.

\zz
\begin{notation}
O índice $r\in\{1,\cdots,CapLog_{s,d}\}$ enumera os possíveis múltiplos canais lógicos entre par $(s,d)$, onde $CapLog_{s,d}$ é o mínimo entre $CapLog_s$ e $CapLog_d$. 
\end{notation}

\zz
\begin{theorem}
Fração de Tráfego $=$ $f_{s,r,d} \in [0,1]$: variável contínua.
 \label{f}
\end{theorem}

\zz
\begin{theorem}
Ligação Lógica $=$ $F_{s,r,d} \in \{0,1\}$: variável binária.
 \label{F}

\zz
\end{theorem}
\begin{theorem}
 \label{FmaxVar}
$F_{max}$ $=$ Fração de tráfego do canal mais carregado da rede (congestionamento).
\end{theorem}


\begin{equation}
 \sum_{j,w} B_{s,j,i,w} - \sum_{j,w} B_{s,i,j,w} = \sum_r F_{s,r,d},\quad \forall (s,i) \text{, com } s\neq i.
\label{DefChLog}
\end{equation}

\begin{equation}
F_{s,r,d} \geq f_{s,r,d} ,\quad \forall (s,r,d).
\label{DefChFlow}
\end{equation}

\begin{equation}
\sum_i q_{i,s,d}\cdot \sum_j P_{i,j} = Cap\cdot (\sum_r f_{s,r,d}),\quad \forall (s,d).
\label{DefCapFlowCh}
\end{equation}

\begin{equation}
F_{max} \geq f_{s,r,d},\quad \forall (s,r,d).
\label{DefFmax}
\end{equation}

\begin{equation}
\text{Minimize: } F_{max}.
\label{ObjFmax}
\end{equation}

A Restrição (\ref{DefChLog}) determina as ligações lógicas $F_{s,r,d}$ em termos das componentes topológicas. Em seguida, a Restrição (\ref{DefChFlow}) define a fração do tráfego em cada canal, limitado pela existência do canal. Para as variáveis definidas nesta seção, é necessária a nova restrição de limitação da capacidade (\ref{DefCapFlowCh}), que substitui a Restrição (\ref{DefCapFlow}). Por fim, definimos o congestionamento ($F_{max}$) na Variável \ref{FmaxVar} e a Restrição (\ref{DefFmax}) determina $F_{max}$ em termos das frações de tráfego em cada canal. Deste modo, a Função Objetivo (\ref{ObjFmax}) agora consiste em minimizar $F_{max}$. Apesar das novas variáveis introduzidas nesta seção, a ordem de grandeza no número de variáveis continua sendo comandada pelas componentes topológicas. 

% O caso de uso apresentado nesta seção, mostra que é possível minimizar diretamente o congestionamento nesta modelagem, pois esta é uma bem conhecida métrica para o VTD. Todavia, uma abordagem mais eficiente é a simples limitação do congestionamento, minimizando outra métrica, de modo a deixar o modelo mais tratável \cite{Renato06}, como foi usado na forma básica do modelo TWA.


\subsection{Ligações Lógicas em cada Fibra}
\label{LimW}

Um controle muito usado nas modelagens de RWA  \cite{Zang00,Jaumard04}, é o número máximo L (Variável \ref{LimWd}) de ligações lógicas por fibra. Caso seja fixada, ela pode ser usada para limitar cada ligação física, como é feito pela Restrição (\ref{L}), ou minimizado diretamente como função objetivo. Caso a Restrição (\ref{L}) seja adotada, a capacidade física dos nós realizarem ligações lógicas ($CapLog_i$) será modificada para $H\cdot L$, se a topologia física é livre, ou $\sum_j D_{i,j}\cdot L$, caso a topologia física seja fixada.

\zz
\begin{theorem}
 \label{LimWd}
$L$ $=$ Número máximo de ligações lógicas em cada fibra.
\end{theorem}

\begin{equation}
 \label{L}
\sum_{s,w} B_{s,i,j,w}\leq L,\quad \forall (i,j).
\end{equation}


% \subsection{Comprimentos de Onda}
% \label{CtrlW}
% 
% Um objetivo comum nas modelagens do RWA é controlar o número de comprimentos de onda utilizados na rede \cite{Zang00, Jaumard04}. Para determinar se um comprimento de onda foi usada na rede, temos a Restrição (\ref{DefQw}), que limita a soma de todas as componentes topológicas no comprimento de onda $w$, pela existência de $Q_w$ (Variável \ref{Cw}). O fator $M\cdot (N² - N)$ representa o número máximo de componentes topológicas que podem usar o comprimento de onda $w$ ao mesmo tempo. Ela deve ser adicionada àquelas do modelo TWA, mas somente no caso da topologia física ser livre. 
% 
% %Pois o número de caminhos que um comprimento de onda pode ter entre um mesmo par $(i,j)$ é a multiplicidade física da rede, onde $(N² - N)$ é o número de pares $(i,j)$ possíveis, e $M$ é a multiplicidade física da rede. Qualquer número maior do que este também manteria a integridade da restrição, todavia, restrições mais precisas podem ajudar os algoritmos de resolução de modelos MILP. 
% 
% Caso esta seja fixada, há a Restrição (\ref{DefFisQw}) que é mais conveniente, pois deixaria o modelo mais enxuto. Caso a topologia física da rede seja um dos dados de entrada, há uma forma alternativa para se definir $Q_w$, que reaproveita uma das restrições do modelo TWA. Deixando assim de acrescentar uma nova restrição ao modelo. Com $D_{i,j}$ fixo, podemos multiplicá-lo por $Q_w$ na Restrição (\ref{DefFis}), sem prejudicar a função original da equação, e obter o mesmo efeito da Restrição (\ref{DefQw}). Deste modo, a Restrição (\ref{DefFisQw}) deve substituir a equação (\ref{DefFis}) do modelo original. Para minimizar diretamente o número de comprimentos de onda utilizados na rede, basta usar a soma de todas as variáveis $Q_w$ (Variável \ref{Cw}) como função objetivo.
% 
% %Opcionalmente pode-se limitar o processamento, controlando o valor de $Tv$, como foi definido na Seção \ref{ObjC}. Para isso é necessário incluir um \textit{bound} para o processamento e a restrição adicional (\ref{TcUb}). A limitação do congestionamento ainda pode continuar sendo feita pela Restrição (\ref{DefCapFlow}).
% 
% % \zz
% % \begin{proposition}
% %  \label{TcUperBound}
% % $TcUb$ $=$ \textit{Uper Bound} para o processamento.
% % \end{proposition}
% 
% \zz
% \begin{theorem}
%  \label{Cw}
% Seja $Q_w\in\{0,1\}$, com $w \in \{1,..,W\}$. $Q_w = 1$ se 0 comprimento de onda $w$ é utilizada na rede e $Q_w = 0$, caso contrário.
% \end{theorem}
% 
% \begin{equation}
%  \label{DefQw} 
% \sum_{s,i,j} B_{s,i,j,w} \leq M\cdot (N² - N)\cdot Q_w,\quad \forall w.
% \end{equation}
% 
% \begin{equation}
% \sum_s B_{s,i,j,w} \leq Q_w\cdot D_{i,j},\quad \forall (i,j,w).
% \label{DefFisQw}
% \end{equation} 
% 
% \begin{equation}
%  \label{TcUb}
% TcUb \geq \sum_{s,d,m} T\cdot q_{s,d,m}\cdot A_m.
% \end{equation}
% 
% \begin{equation}
%  \label{ObjW}
% \text{Minimize: } \sum_w Q_w.
% \end{equation}
% 
% \subsection{Conversão de Comprimentos de Onda}
% \label{Conv}
% 
% Outro cenário comum nas modelagem para o RWA é a possibilidade de conversão do comprimento de onda ao longo de um caminho óptico. Em síntese, há duas formas mais comuns de se tratar essa abordagem. Ou um nó possui capacidade total de conversão \cite{Zang00, Jaumard04, Tornatore07} e todas as ligações lógicas passando por ele podem mudar de comprimento de onda nessa passagem, ou há uma quantidade máxima de conversões \cite{ram98, Karcius04}. Como o primeiro método é apenas um caso particular do segundo, trataremos do caso mais geral.
% 
% Não será fixado quais nós terão a capacidade de conversão, mas sim controlaremos o número de conversores na rede, pela Variável \ref{x}. 
% 
% \begin{theorem}
%  \label{x}
% O número de conversões em um nó $i$, de um comprimento de onda $w$, realizadas nas ligações lógicas originadas em $s$, é mapeado pela variável $x_{s,i,w}$. Onde $x_{s,i,w} \in \{0, \cdots, H\}$, se a topologia física é livre, ou $x_{s,i,w} \in \{0, \cdots, \sum_j D_{i,j}\}$, caso $D_{i,j}$ seja um parâmetro.
% \end{theorem}
% 
% Se a topologia física é fixa, então $x_{s,i,w}$ já está bem definida, caso contrário, será necessária a restrição adicional (\ref{Defx}).
% 
% \begin{equation}
%  \label{Defx}
% x_{s,i,w} \leq \sum_j D_{i,j},\quad \forall i.
% \end{equation}
% 
% Ao se habilitar um nó a realizar conversões de comprimento de onda, torna-se necessário substituir a Restrição (\ref{ConservLog}) (conservação dos percursos lógicos, fixados o comprimento de onda e a origem) por outra mais geral, que garante a conservação fixada a origem, mas independente do comprimento de onda. A Restrição (\ref{ConservLogC}) cumpre esse papel. Ela sozinha já habilita o nó com capacidade de conversão total, onde todo comprimento de onde que chega pode ser convertido livremente. Já o número de conversões é mapeado pela Restrição (\ref{ConservLogCx}).
% 
% \begin{equation}
%  \label{ConservLogC}
%  \sum_{j,w} B_{s,j,i,w} \geq \sum_{j,w} B_{s,i,j,w},\quad \forall (s,i) \text{, com } s\neq i.
% \end{equation}
% 
% 
% \begin{equation}
%  \label{ConservLogCx}
%  \sum_j B_{s,j,i,w} - \sum_j B_{s,i,j,w} \geq x_{s,i,w},\quad \forall (s,i,w) \text{, com } s\neq i.
% \end{equation}
% 
% Note na definição da Variável \ref{x}, que o comprimento de onda de saída do conversor não é registrada. A Restrição (\ref{ConservLogCx}) assegura que haverá componentes topológicas no comprimento de onda $w$, com origem $s$, chegando em $i$ em número suficiente para realizar as conversões. Para cada uma destas, a Restrição (\ref{ConservLogC}) garante que haverá algum componente partindo de $i$, com origem $s$, mas em um comprimento de onda diferente de $w$. Aqui também podem ocorrer situações como a que foi ilustrada na Figura \ref{fig:Unsolved}, nas quais algo fica indefinido na interpretação das componentes. Mas esses casos também não influenciam na modelagem e por isso também não serão aqui considerados.
% 
% Pode ser conveniente limitar o número de conversões em cada nó, ou seja, limitar a soma $\sum_{s,w} x_{s,i,w}$, ou o número total de conversões. Ou ainda, usar este último como função objetivo, o que é feito pela Restrição (\ref{ObjX}).
% 
% \begin{equation}
%  \label{ObjX}
%  \text{Minimize: } \sum_{s,i,w} x_{s,i,w}.
% \end{equation}
% 

\section{Experimentos Computacionais}
\label{testes}
Para avaliar a pertinência desta nova abordagem, testes computacionais foram realizados. Toda a modelagem do TWA, incluindo os casos de uso da Seção \ref{cases}, foi descrita em {\tt AMPL\rr} (\textit{A Modeling Language for Mathematical Programming} - www.ampl.com), de modo que facilmente possa ser adaptada para várias finalidades. Assim, para uma determinada aplicação, basta limitar por um valor aceitável as métricas de interesse, dentre as muitas que esta modelagem suporta, e selecionar uma função objetivo, até de menor relevância. Deste modo, com a ajuda de um \textit{solver}, a primeira solução viável encontrada já seria suficiente para o que se foi pretendido. Assim, o trabalho de implementação é reduzido a apenas uma acertada calibração do modelo.

Deste modo, produzimos resultados que pudessem ser comparados com o modelo proposto em \cite{Karcius04} para a resolução integrada do VTD e RWA, cuja formulação é baseada nas modelagens clássicas desses problemas \cite{ram02, Zang00}, o qual denominaremos VTD-RWA. Nos resultados que iremos confrontar, são considerados: o grau lógico da rede ($Gl$), o número de ligações lógicas em cada fibra ($L$), o número de comprimentos de onda disponíveis em cada ligação física ($W$) e o número de saltos físicos na topologia ($S$). Esses parâmetros são comumente tratados nas investigações a cerca do RWA \cite{Zang00}. Também é controlado o congestionamento, que é uma conhecida métrica para o VTD. Isso é feito através da clássica heurística HLDA \cite{ram02, sbpo04}, gerando uma solução para o VTD que alimenta as etapas seguintes do procedimento, conforme apresentado em \cite{Karcius04}. Para cada grau lógico, o HLDA produz de forma determinística uma topologia lógica, baseado na matriz de demandas. A solução para o VTD é completada distribuindo o tráfego sobre esta topologia, através de um modelo de programação linear \cite{ram02}.

Para produzir resultados passíveis de comparação, são acrescentadas à modelagem básica do TWA, mostrada na Seção \ref{Basic}, as restrições de controle do grau lógico (Seção \ref{ConservGl}) e a de limitação do número de ligações lógicas em cada fibra (Seção \ref{LimW}). Esta formulação expecífica é denominada de TWA-$a$. Para controlar a qualidade das soluções quanto ao congestionamento, foram obtidas topologias virtuais com uma implementação da heurística HLDA. Para cada uma destas topologias, foi distribuído o tráfego e calculado o congestionamento através do \textit{solver} do \textit{software} {\tt GLPK} (\textit{GNU Linear Programming Kit} - www.gnu.org/software/glpk/), utilizando uma versão do modelo clássico para o VTD \cite{ram02}. O valor de congestionamento obtido, arredondado para cima, foi usado como a capacidade dos canais lógicos, na Restrição (\ref{DefCapFlow}). Para cada instância testada, todo esse procedimento levou menos de um segundo, portanto não será considerado na contagem de tempo de processamento dos nossos resultados.

A estratégia adotada foi, partindo do menor grau lógico ($Gl=1$), fixar nos valores mínimos o número de comprimentos de onda e a limitação de ligações das fibras ($W=1$ e $L=1$), minimizando o número de saltos ($S$). Um solver para problemas MILP é instanciado com essa configuração. Enquanto o solver retornar que o problema é insolúvel \cite{mukherjee}, $L$ será incrementado até o seu limite, que é o valor atual de $W$. Quando $L$ não puder ser aumentado ($L=W$), então $W$ o será, e assim por diante. 

Se o solver não encontrar uma solução viável dentro de $400$ segundos, então ele é abortado e é aplicado o mesmo precedimento de quando a solução é insolúvel. Isso é feito com o objetivo de ``afrouxar'' as restrições de modo que o solver possa encontrar uma solução viável mais rapidamente, sacrificando um pouco a qualidade das restrições. Se uma solução viável é encontrada, dentro da janela de $400$ segundos, o solver é interrompido, a solução é registrada e o grau lógico é incrementado, dando continuidade ao processo. 

Nas situações em que o problema era insolúvel, o solver determinou isso em poucos segundos, dificultando a separação dos tempos de leitura e de execução. Portanto eles também não foram computados. Os casos em que o solver retorna que o problema é insolúvel chamaremos de \textit{Instância Insolúvel} ($I$), e naqueles em que o solver não encontrar uma solução viável dentro de $400$ segundos, chamaremos de \textit{Tentativa Falha} ($F$). Essas situações em que o modelo precisou ser calibrado fazem parte do método e são registradas conjuntamente com os resultados.

% Este arranjo não foi obtido ao acaso e nem por tentativa e erro. O grau lógico ($Gl$), o número de comprimentos de onda ($W$), a limitação de ligações lógicas das fibras ($L$), a capacidade do canal ($Cap$) e o número de saltos ($S$), deveriam ser controlados para viabilizar a comparação com o trabalho do Karcius. O parâmetro $S$ foi escolhido para a função objetivo pois, dentre as opções, era a que fornecia o modelo mais enxuto. Além disso, a minimização do número de saltos ajuda a evitar a formação de ciclos na solução \cite{Karcius04}. 

%Como, nesta modelagem, $W$ está diretamente relacionado a quantidade de variáveis, é mais conveniente começar com $W=1$. Disso decorre a escolha de também começarmos com $Gl=1$ e $L=1$. A maior precedência para a incrementação é dada ao $Gl$, pois variando este temos instâncias diferentes. A menor precedência ficou para $W$, pois quanto menor ele for menores precisarão ser os custos de instalação da rede. Na posição intermediária fica $L$, pois, minimizando-o, maximizamos a disponibilidade da rede.


% \begin{table}[!ht]
% \begin{center}
% 
% \begin{tabular}{ccl} \\ \hline
% $GL$  & $ =$ & Grau Lógico\\
% $L$   & $ =$ & Limitação de Ligações lógicas das Fibras\\
% $W$   & $ =$ & Número de comprimentos de onda disponíveis\\
% $S$   & $ =$ & Número de Saltos Físicos\\
% $t$   & $ =$ & Tempo em segundos para encontrar a primeira solução viável\\
% $Cap$ & $ =$ & Capacidade de Tráfego de Cada Canal Óptico\\
% $I$   & $ =$ & Instância Insolúvel\\
% $F$   & $ =$ & Tentativa Falha \\ \hline
% \end{tabular}
% 
% \caption{Legendas para as Tabelas \ref{N6} e \ref{N12}.}
% 
% \label{legendas}
% \end{center}
% \end{table}


Foram executados dois testes computacionais, com uma rede de $6$ nós e com uma rede de $12$ nós \cite{Karcius04}. Utilizamos o \textit{solver} {\tt SCIP} (\textit{Solving Constraint Integer Programs} - scip.zib.de) para encontrar as soluções viáveis. Além de calcular a capacidade dos canais ópticos ($Cap$), como foi descrito acima, o GLPK também foi usado para interpretar o modelo AMPL, gerando a entrada de dados para o SCIP. Vale observar que o SCIP e o GLPK são \textit{softwares} livres, de código fonte aberto, e de distribuição gratuita. Os resultados que serão confrontados com os nossos foram produzidos com o {\tt ILOG CPLEX\rr} (www.ilog.com/products/cplex), uma ferramenta comercial.

Os resultados para a rede de $6$ nós foram compilados na Tabela \ref{N6}. A primeira coluna registra o grau lógico de cada instância ($Gl$), que neste caso foram $5$. Da segunda até a quarta coluna ($L$, $W$ e $S$) estão os resultados de \cite{Karcius04} e da quinta à sétima estão os resultados obtidos com a metodologia descrita acima.. Note que em todas as instâncias foram obtidos resultados melhores.

\begin{table}[!ht]
\begin{center}
\begin{tabular}{c|ccc|ccc|ccc|} %\\ \hline
    &  \multicolumn{3}{c}{VTD-RWA}   & \multicolumn{6}{c}{TWA-$a$} \\ \hline
 Gl &  L & W &  S   &  L & W &  S  &  t  & Cap &  I\\ \hline
 1  &  1 & 1 &  09  &  1 & 1 &  06* & 00 &  08 &  0\\
 2  &  2 & 2 &  18  &  1 & 1 &  11* & 03 &  03 &  0\\
 3  &  2 & 2 &  32  &  1 & 1 &  14* & 00 &  02 &  0\\
 4  &  3 & 3 &  41  &  2 & 2 &  25* & 10 &  01 &  2\\
 5  &  4 & 5 &  50  &  3 & 3 &  46* & 00 &  01 &  2\\ \hline \hline
\end{tabular}

\caption{Resultados para a rede de $6$ nós. *: Solução Ótima.}

\label{N6}
\end{center}
\end{table}


A oitava coluna da Tabela \ref{N6} traz o tempo , em segundos, que o \textit{solver} levou para encontrar a primeira solução viável ($t$). Um fato importante é que em todas as instâncias desta bateria de testes, este tempo foi suficiente para determinar a otimalidade da solução viável encontrada. Essa possibilidade, além do interesse teórico, corrobora para a eficiência do método aqui aplicado. Em  \cite{Karcius04}  não são encontradas soluções ótimas e não foi informado o tempo gasto nesta etapa.

Ainda na Tabela \ref{N6}, na nona coluna temos a capacidade do canal óptico ($Cap$) e por fim, na última coluna temos o histórico das tentativas de calibração do modelo, do tipo Instância Insolúvel ($I$). Nesta coluna, um \textit{zero} significa que os resultados registrados nesta mesma linha foram conseguidos na primeira rodada do \textit{solver}. Analogamente, um número diferente de zero significa a quantidade de vezes em que foram encontradas instâncias insolúveis, antes da execução que proveu o resultado expresso nesta linha. Para a rede de $6$ nós não ocorreram tentativas de calibração do modelo do tipo Tentativa Falha ($F$).

Com o mesmo arranjo de colunas descrito acima, a Tabela \ref{N12} trás os resultados para a rede de $12$ nós. Desta vez temos $6$ instâncias, do grau lógico $1$ até o $6$. Outra diferença é que esta tabela trás uma coluna a mais, a última. Ela representa o histórico das tentativas de calibração do modelo, do tipo Tentativa Falha ($F$). 

\begin{table}[!ht]
\begin{center}

\begin{tabular}{c|ccc|ccl|cccc} %\\ \hline
    &  \multicolumn{3}{c}{VTD-RWA}   & \multicolumn{6}{c}{TWA-$a$} \\ \hline
 Gl &  L & W &  S    &  L & W &  S   &  t   & Cap &  I & F\\ \hline
 1  &  1 & 1 &  32   &  1 & 1 &  13* & 027  &  35 &  0 & 0\\
 2  &  2 & 2 &  52   &  1 & 1 &  27  & 034  &  10 &  0 & 0\\
 3  &  3 & 3 &  78   &  2 & 3 &  72  & 160  &  04 &  2 & 1\\
 4  &  4 & 4 &  104  &  2 & 3 &  65  & 120  &  03 &  0 & 0\\
 5  &  4 & 4 &  130  &  3 & 3 &  98  & 190  &  02 &  1 & 0\\
 6  &  5 & 5 &  147  &  3 & 3 &  84  & 037  &  02 &  0 & 0\\ \hline \hline
\end{tabular}

\caption{Resultados para a rede de $12$ nós. *: Solução Ótima.}

\label{N12}
\end{center}
\end{table}

Aqui também foram obtidos melhores resultados para o trio $L$, $W$ e $S$. Nesta etapa, os resultados de \cite{Karcius04} foram obtidos com $6$ horas de execução, enquanto os resultados com o modelo SIGLA levaram menos de $17$ minutos para serem produzidos. Neste tempo estão computados os tempos de cada instância, mais o tempo de um Tentativa Falha que ocorreu para $Gl = 3$. Um detalhe importante é que para a primeira instância ($Gl=1$) o \textit{solver} também foi capaz de provar a otimalidade para a primeira solução viável. O que demostra que o modelo mantém razoável desempenho mesmo com uma rede de maior porte. Com esses resultados mostramos a viabilidade da técnica aqui proposta, técnica esta que é totalmente baseada no modelo apresentado neste trabalho. 

\section{Conclusão}
\label{conc}
Uma formulação MILP foi apresentada para o projeto de redes ópticas com roteamento por comprimento de onda, englobando as restrições dos problemas VTD e RWA, possibilitando o confrontamento de métricas de ambas as modelagens. Esta formulação é mais abrangente que as apresentadas na literatura e possui a vantagem de ser mais tratável no que se refere ao número de variáveis e restrições.

Para garantir uma complexidade computacional equivalente a de modelos que englobam apenas os problemas VTD e RWA separadamente, a principal consideração que a formulação faz é a utilização das variáveis topológicas, que sintetizam variáveis distintas das formulações tradicionais, além da forma agregada com que é feita a distribuição do tráfego e o roteamento dos canais ópticos, de forma semelhante a outros modelos da literatura \cite{ram02,Tornatore07}.

O modelo foi apresentado inicialmente em uma forma básica, contendo as restrições e variáveis consideradas essenciais para a resolução do projeto completo, que engloba a escolha da topologia física, definição da topologia virtual, distribuição de tráfego, definição das rotas físicas e alocação dos comprimentos de onda. Nessa modelagem básica a função objetivo adotada foi a minimização do número de saltos físicos dos caminhos ópticos. Outras possibilidades de restrições e funções objetivo foram apresentadas como opções de aplicação da formulação.

Para validar experimentalmente a formulação, foram realizados testes comparativos com os resultados apresentados em \cite{Karcius04}, aonde as redes hipotéticas consideradas possuem 6 e 12 nós. Os resultados obtidos foram consideravelmente expressivos, com relação à qualidade das soluções e de desempenho computacional.

Esse trabalho pode ser amplamente estendido, especialmente com relação a experimentos, pois a formulação desenvolvida cria possibilidade de realização de testes variados, de acordo com as restrições e função objetivo que deseja-se utilizar. Do ponto de vista conceitual, uma oportunidade imediata para trabalhos futuros seria a consideração de conversão de comprimentos de onda. 


\bibliographystyle{sbpo}
\bibliography{biblio}

\end{document}
